= DeliverIt API Documentation
:toc: right
:toclevels: 2
:version: 1.0

== Overview

This API allows you to manage delivery orders and their associated order-groups. Features include creating and retrieving both order-groups and individual delivery orders.


== Base URL

The base URL for the API is `http://external.deliveritmy.com`.

== Authentication

Use your API token in the `Authorization` header like this:

----
Authorization: Bearer YOUR_API_TOKEN
----

== Error Codes

|===
| Code | Description
| 400  | Bad Request
| 401  | Unauthorized
| 404  | Not Found
| 500  | Internal Server Error
|===

== Endpoints

=== Order-Groups

==== POST /order-groups

Creates a new order group for delivery.

.Request Body Parameters
name::
  - Type: `string`
  - Description: The name or description of the order group.
  - Required: Yes

pickup_location::
  - Type: `location`
  - Description: The pickup location for the order group. See <<Location>>.
  - Required: Yes

.Request Example
[source,json]
----
{
  "name": "Afternoon Deliveries",
  "pickup_location": "TBA"
}
----

.Response Fields
id::
  - Type: `int`
  - Description: Unique identifier for the newly created order group.

name::
  - Type: `string`
  - Description: The name or description of the order group.

status::
  - Type: `string`
  - Description: Current status of the order group. See <<Order Group Status>>.

created_at::
  - Type: `string`
  - Description: Timestamp indicating when the order group was created.

updated_at::
  - Type: `string`
  - Description: Timestamp indicating the last time the order group was updated


.Response Example
[source,json]
----
{
  "id": 4,
  "name": "Afternoon Deliveries",
  "pickup_location": "TBA",
  "status": "OPEN",
  "created_at": "2023-01-01T12:34:56Z",
  "updated_at": "2023-01-02T12:34:56Z"
}
----



==== GET /order-groups/:group_id

Retrieves details of a specific order-group.

.Path Parameters
|===
| Name      | Type  | Description
| group_id  | int   | ID of the order-group to retrieve
|===

.Response Example
[source,json]
----
{
  "id": 1,
  "name": "Morning Deliveries",
  "created_at": "2023-01-01T12:34:56Z",
  "updated_at": "2023-01-02T12:34:56Z"
}
----


=== Delivery Orders

==== POST /order-groups/:group_id/orders

Creates a new delivery order within a specific order-group.

.Path Parameters
|===
| Name  | Type      | Description
| group_id    | string    | ID of the order-group
|===

.Request Parameters
|===
| Name     | Type   | Description
| address  | string | Delivery address
| status   | string | Delivery status (e.g., "Pending", "Delivered")
|===

.Response Example
[source,json]
----
{
  "id": 3,
  "address": "789 Oak St",
  "status": "Pending"
}
----

==== GET /order-groups/:group_id/orders/:id

Retrieves details of a specific delivery order within a given order-group.

.Path Parameters
|===
| Name      | Type  | Description
| group_id  | int   | ID of the order-group
| id        | int   | ID of the specific delivery order within the order-group
|===

.Response Example
[source,json]
----
{
  "id": 1,
  "address": "123 Main St",
  "status": "Pending",
  "created_at": "2023-01-01T12:34:56Z",
  "updated_at": "2023-01-02T12:34:56Z"
}
----


== Callback for Delivery Status Updates

The callback will be made to the `callback_url` provided in the POST request. The callback will include the following parameters:

|===
| Name               | Type   | Description
| status             | string | Delivery status (e.g., "Success", "Failed")
| proof_of_delivery  | string | A URL or identifier for proof of delivery (e.g., a photo, digital signature)
|===

.Callback Example
[source,json]
----
{
  "status": "Success",
  "proof_of_delivery": "https://example.com/proofs/1234.jpg"
}
----


== Order Group Status

An order group undergoes a series of stages, each represented by a distinct status. Though the status is a string, it can only assume the following specific values:

.Status and Descriptions
|===
| Status          | Description

| OPEN            | Initial stage with draft versions of pickup and drop-off tasks.
| CONFIRMED       | Pickup and drop-off tasks are finalized and forwarded to OnFleet for driver allocation.
| ASSIGNED        | A driver has been allocated for the pickup and drop-off tasks in the order group.
| IN_TRANSIT      | The driver has initiated the pickup and drop-off tasks; the orders are currently in transit.
| SUCCESS         | All tasks related to pickup and drop-off within the order group have been successfully completed.
| PARTIAL_SUCCESS | Mixed results for the pickup and drop-off tasks within the order group; some succeeded while others failed.
| FAILED          | All tasks related to pickup and drop-off within the order group were unsuccessful.
| CANCELLED       | All tasks related to pickup and drop-off within the order group have been cancelled.
|===


== Location 

The Location Object represents geographical coordinates, consisting of `longitude` and `latitude`.

* Location Object Properties:
  ** Longitude:
    - Type: `float`
    - Description: The longitude coordinate of the location
  ** Latitude:
    - Type: `float`
    - Description: The latitude coordinate of the location
wa