= DeliverIt API Documentation
:toc: right
:toclevels: 2
:version: 1.0

== Overview

This API allows you to manage delivery orders and their associated order-groups. Features include creating and retrieving both order-groups and individual delivery orders.


== Base URL

The base URL for the API is `http://external.deliveritmy.com`.

== Authentication

Use your API token in the `Authorization` header like this:

----
Authorization: Bearer YOUR_API_TOKEN
----

== Error Codes

|===
| Code | Description

| 400  | Bad Request
| 401  | Unauthorized
| 404  | Not Found
| 500  | Internal Server Error
|===

== Endpoints

=== Order-Groups

==== POST /order-groups

Creates a new order-group for delivery.

.Request Parameters
|===
| Name  | Type   | Description

| name  | string | The name of the order-group
|===

.Response Example
[source,json]
----
{
  "id": 3,
  "name": "Evening Deliveries"
}
----

==== GET /order-groups/:group_id

Retrieves details of a specific order-group.

.Path Parameters
|===
| Name      | Type  | Description

| group_id  | int   | ID of the order-group to retrieve
|===

.Response Example
[source,json]
----
{
  "id": 1,
  "name": "Morning Deliveries",
  "created_at": "2023-01-01T12:34:56Z",
  "updated_at": "2023-01-02T12:34:56Z"
}
----


=== Delivery Orders

==== POST /order-groups/:group_id/orders

Creates a new delivery order within a specific order-group.

.Path Parameters
|===
| Name  | Type      | Description

| group_id    | string    | ID of the order-group
|===

.Request Parameters
|===
| Name     | Type   | Description

| address  | string | Delivery address
| status   | string | Delivery status (e.g., "Pending", "Delivered")
|===

.Response Example
[source,json]
----
{
  "id": 3,
  "address": "789 Oak St",
  "status": "Pending"
}
----

==== GET /order-groups/:group_id/orders/:id

Retrieves details of a specific delivery order within a given order-group.

.Path Parameters
|===
| Name      | Type  | Description

| group_id  | int   | ID of the order-group
| id        | int   | ID of the specific delivery order within the order-group
|===

.Response Example
[source,json]
----
{
  "id": 1,
  "address": "123 Main St",
  "status": "Pending",
  "created_at": "2023-01-01T12:34:56Z",
  "updated_at": "2023-01-02T12:34:56Z"
}
----


==== Callback for Delivery Status Updates

The callback will be made to the `callback_url` provided in the POST request. The callback will include the following parameters:

|===
| Name               | Type   | Description

| status             | string | Delivery status (e.g., "Success", "Failed")
| proof_of_delivery  | string | A URL or identifier for proof of delivery (e.g., a photo, digital signature)
|===

.Callback Example
[source,json]
----
{
  "status": "Success",
  "proof_of_delivery": "https://example.com/proofs/1234.jpg"
}
----
